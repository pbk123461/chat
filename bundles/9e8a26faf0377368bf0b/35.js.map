{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","_ref","onCancelClick","onSaveClick","isSaveDisabled","React","createElement","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","_editorStateTransfer$","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","_ref2","props","_objectWithoutProperties","_excluded","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","async","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","Fragment","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","bodyPrefix","mxEvent","lines","split","l","trim","getTextReplyFallback","formattedBodyPrefix","html","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Emote","Text","isMarkdownEnabled","formattedBody","plainToRich","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","_content$msgtype$star","_content$msgtype","sendAnyway","shouldSendAnyway","dis","dispatch","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","event","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","resp","sendRoundTripMetric","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/9e8a26faf0377368bf0b/35.js","sourceRoot":""}